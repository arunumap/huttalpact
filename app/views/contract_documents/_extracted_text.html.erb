<div class="rounded-xl bg-white shadow-sm ring-1 ring-gray-900/5">
  <div class="border-b border-gray-200 px-6 py-4">
    <h3 class="text-base font-semibold text-gray-900">Extracted Text</h3>
  </div>
  <div class="px-6 py-5">
    <% completed_documents = contract.contract_documents.completed %>
    <% if completed_documents.any? %>
      <% completed_documents.each do |doc| %>
        <details class="group mb-4 last:mb-0">
          <summary class="flex cursor-pointer items-center justify-between rounded-lg bg-gray-50 px-4 py-3 text-sm font-medium text-gray-700 hover:bg-gray-100 transition">
            <div class="flex items-center gap-2">
              <svg class="h-4 w-4 text-gray-400 transition group-open:rotate-90" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
              </svg>
              <span><%= doc.filename %></span>
            </div>
            <% if doc.page_count %>
              <span class="text-xs text-gray-400"><%= pluralize(doc.page_count, "page") %></span>
            <% end %>
          </summary>
          <div class="mt-2 max-h-96 overflow-y-auto rounded-lg border border-gray-200 bg-gray-50 p-4">
            <pre class="whitespace-pre-wrap text-xs text-gray-700 font-mono leading-relaxed"><%= doc.extracted_text %></pre>
          </div>
        </details>
      <% end %>
    <% else %>
      <p class="text-sm text-gray-500 text-center py-4">
        No text has been extracted yet. Upload a document to get started.
      </p>
    <% end %>
  </div>
</div>
