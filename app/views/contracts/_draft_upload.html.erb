<% form_url = local_assigns.fetch(:form_url, create_draft_contracts_path) %>
<%= form_with url: form_url, method: :post, multipart: true, data: { controller: "draft-upload" } do %>
  <div class="rounded-xl bg-gradient-to-br from-amber-50 to-orange-50 shadow-sm ring-1 ring-amber-200/60">
    <div class="px-6 py-8">
      <div class="flex items-center gap-3 mb-4">
        <div class="flex h-12 w-12 items-center justify-center rounded-lg bg-amber-100">
          <svg class="h-7 w-7 text-amber-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.455 2.456L21.75 6l-1.036.259a3.375 3.375 0 00-2.455 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z" />
          </svg>
        </div>
        <div>
          <h3 class="text-lg font-semibold text-gray-900">Upload your contract</h3>
          <p class="text-sm text-gray-600">AI will automatically extract all the details for you</p>
        </div>
      </div>

      <div data-draft-upload-target="dropzone"
           data-action="click->draft-upload#browse dragenter->draft-upload#dragenter dragleave->draft-upload#dragleave dragover->draft-upload#dragover drop->draft-upload#drop"
           class="flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-amber-300 bg-white/60 px-6 py-12 transition hover:border-amber-400 hover:bg-white/80">
        <svg class="mx-auto h-12 w-12 text-amber-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z" />
        </svg>
        <p data-draft-upload-target="label" class="mt-3 text-sm font-medium text-gray-700">Drop your contract files here or click to browse</p>
        <p class="mt-1 text-xs text-gray-400">PDF, DOCX, or TXT up to 25MB each</p>
      </div>

      <input data-draft-upload-target="input"
             data-action="change->draft-upload#fileSelected"
             type="file"
             name="contract_documents[]"
             accept=".pdf,.docx,.txt,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/plain"
             multiple
             class="hidden">

      <%# File list preview %>
      <div data-draft-upload-target="fileList" class="hidden mt-4 space-y-2"></div>

      <%# Upload button (hidden until files added) %>
      <div data-draft-upload-target="submitArea" class="hidden mt-5">
        <button type="submit"
                data-draft-upload-target="submitButton"
                class="w-full rounded-lg bg-amber-600 px-4 py-3 text-sm font-semibold text-white shadow-sm hover:bg-amber-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-amber-600 transition-colors cursor-pointer">
          <span data-draft-upload-target="submitText">
            Upload & Extract with AI
          </span>
        </button>
        <p class="mt-2 text-center text-xs text-gray-500">
          A draft contract will be created and AI will extract all details automatically
        </p>
      </div>
    </div>
  </div>
<% end %>
